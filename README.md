Most of the code is borrowed from http://jekyll-new.joelglovier.com/
